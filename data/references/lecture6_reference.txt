The lecture begins with a list of core SQL features learned so far, including projections, selections, joins, aggregates, GROUP BY, HAVING, and data modification commands. It then introduces subqueries as queries embedded inside other queries, also called nested queries, which are used when conditions depend on tables that must first be computed. Subqueries may appear in the SELECT, FROM, or WHERE clauses, and a general rule of thumb is to avoid nested queries when possible.

The first section focuses on subqueries in SELECT, where subqueries return a single value such as a genre, average salary, or actor count for each movie. These examples demonstrate correlated subqueries, where the inner query depends on the outer query. The lecture emphasizes subquery unnesting, showing that many SELECT subqueries can be rewritten more efficiently as joins with GROUP BY. It also highlights that not all rewritten queries are always equivalent, especially when outer joins are involved.

Next, subqueries in FROM are introduced, where the result of a subquery becomes a temporary table used in the outer query. These are described as not correlated subqueries and can also be rewritten through unnesting or refactoring using WITH clauses.

The lecture then moves to subqueries in WHERE, introducing existential quantifiers using EXISTS and IN to test whether at least one matching record exists. Examples show how to find actors who acted in Sci-Fi or non-Sci-Fi movies and how these queries can also be unnested into joins. The lecture then introduces universal quantifiers, which express “for all” conditions, such as finding actors who only acted in action movies or movies where all actors earn above a salary threshold. Because SQLite does not directly support ALL, these are rewritten using NOT EXISTS.

Finally, the concept of monotone and non-monotone queries is introduced. A query is monotone if adding tuples cannot remove results. The lecture shows that queries without subqueries, negation, or aggregates are monotone and thus can be unnested, while queries with universal quantifiers, negation, or aggregates are non-monotone and cannot be unnested.
